'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,'__esModule',{value:!0}),exports.MediaStorage=void 0;require('whatwg-fetch');var _base64Js=require('base64-js'),_base64Js2=_interopRequireDefault(_base64Js);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function checkStatus(a){if(200<=a.status&&300>a.status)return a;throw new Error(a.statusText)}function parseJSON(a){return a.json()}var DEV_BASE_URL='http://v2.dev.api.bengga.com/2.0/media',LIVE_BASE_URL='http://v2.dev.api.bengga.com/2.0/media',MediaStorage=exports.MediaStorage=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'devt';_classCallCheck(this,a),this.environment=b}return _createClass(a,[{key:'_getFullUrl',value:function _getFullUrl(a){return'devt'===this.environment?''+DEV_BASE_URL+a:''+LIVE_BASE_URL+a}},{key:'_jsonize',value:function _jsonize(a){return a.then(checkStatus).then(parseJSON)}},{key:'_request',value:function _request(a,b,c){var d=this._getFullUrl(b),e={method:a,mode:'cors'};return'GET'!==a&&'HEAD'!==a&&(e.body=c.data,e.headers={"Content-Type":c.contentType}),fetch(d,e).then(checkStatus).then(parseJSON)}},{key:'upload',value:function upload(a){return this._request('POST','',a)}},{key:'get',value:function get(a){return this._request('GET','/'+a)}},{key:'base64DataUrlToByteArray',value:function base64DataUrlToByteArray(a){var b=/data:(.*);base64,(.*)/ig,c=b.exec(a);if(3==c.length){var d=_base64Js2.default.toByteArray(c[2]),e=c[1];return{data:d,contentType:e}}return null}}]),a}();