<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">build/cloud_storage.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">build/cloud_storage.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;

Object.defineProperty(exports, &quot;__esModule&quot;, {
  value: true
});
exports.CloudStorage = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i &lt; props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (&quot;value&quot; in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

require(&apos;whatwg-fetch&apos;);

var _hawk = require(&apos;hawk&apos;);

var _hawk2 = _interopRequireDefault(_hawk);

function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(&quot;Cannot call a class as a function&quot;); } }

function getAuthHeader(url, method, credentials) {
  return _hawk2.default.client.header(url, method, { credentials: credentials, ext: &apos;funtype-client&apos; }).field;
}

function checkStatus(response) {
  if (response.status &gt;= 200 &amp;&amp; response.status &lt; 300) {
    return response;
  } else {
    throw new Error(response.statusText);
  }
}

function parseJSON(response) {
  return response.json();
}

var DEV_BASE_URL = &quot;http://dev.api.aqsoftwareinc.com/2.0/funType&quot;;
var LIVE_BASE_URL = &quot;http://live.api.aqsoftwareinc.com/2.0/funType&quot;;

var CloudStorage = exports.CloudStorage = function () {
  function CloudStorage(credentials) {
    var environment = arguments.length &gt; 1 &amp;&amp; arguments[1] !== undefined ? arguments[1] : &apos;devt&apos;;

    _classCallCheck(this, CloudStorage);

    this.credentials = { &apos;id&apos;: credentials.id, &apos;key&apos;: credentials.key, &apos;algorithm&apos;: &apos;sha256&apos; };
    this.environment = environment;
  }

  _createClass(CloudStorage, [{
    key: &apos;_getFullUrl&apos;,
    value: function _getFullUrl(url) {
      if (this.environment === &apos;devt&apos;) return &apos;&apos; + DEV_BASE_URL + url;else return &apos;&apos; + LIVE_BASE_URL + url;
    }
  }, {
    key: &apos;_jsonize&apos;,
    value: function _jsonize(promise) {
      return promise.then(checkStatus).then(parseJSON);
    }
  }, {
    key: &apos;_request&apos;,
    value: function _request(method, relativeUrl) {
      var body = arguments.length &gt; 2 &amp;&amp; arguments[2] !== undefined ? arguments[2] : {};

      var fullUrl = this._getFullUrl(relativeUrl);

      return fetch(fullUrl, {
        method: method,
        headers: {
          &apos;Authorization&apos;: getAuthHeader(fullUrl, method, this.credentials),
          &apos;Content-Type&apos;: &apos;application/json&apos;
        },
        body: JSON.stringify(body)
      }).then(checkStatus).then(parseJSON);
    }
  }, {
    key: &apos;insert&apos;,
    value: function insert(data) {
      return this._request(&apos;POST&apos;, &apos;&apos;, data);
    }
  }, {
    key: &apos;update&apos;,
    value: function update(id, data) {
      return this._request(&apos;PUT&apos;, &apos;/&apos; + id, data);
    }
  }, {
    key: &apos;get&apos;,
    value: function get(id) {
      return this._request(&apos;GET&apos;, &apos;/&apos; + id);
    }
  }]);

  return CloudStorage;
}();</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
