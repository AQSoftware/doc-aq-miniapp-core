<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">build/ui.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">build/ui.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;

Object.defineProperty(exports, &quot;__esModule&quot;, {
  value: true
});
exports.defaultUIBridge = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i &lt; props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (&quot;value&quot; in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _CallbackHelper = require(&apos;./CallbackHelper&apos;);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(&quot;Cannot call a class as a function&quot;); } }

/**
Core class that allows a MiniApp to request various UI selectors available
in the AQ App

Copyright (c) 2017 AQ Software Inc.
*/

var MESSAGE_SHOW_TITLE_INPUT = &apos;showTitleInput&apos;;
var MESSAGE_SHOW_WEB_IMAGE_SELECTOR = &apos;showWebImageSelector&apos;;
var MESSAGE_SHOW_GALLERY_IMAGE_SELECTOR = &apos;showGalleryImageSelector&apos;;
var MESSAGE_SHOW_FRIENDS_SELECTOR = &apos;showFriendsSelector&apos;;
var MESSAGE_SHOW_PREVIEW_WITH_DATA = &apos;showPreviewWithData&apos;;

var UIBridge = function () {
  function UIBridge(callbackHelper) {
    _classCallCheck(this, UIBridge);

    this._callbackHelper = callbackHelper;
  }

  _createClass(UIBridge, [{
    key: &apos;_saveCallbackAndProcessMessage&apos;,
    value: function _saveCallbackAndProcessMessage(message) {
      var key = arguments.length &gt; 1 &amp;&amp; arguments[1] !== undefined ? arguments[1] : null;
      var callback = arguments.length &gt; 2 &amp;&amp; arguments[2] !== undefined ? arguments[2] : null;
      var param = arguments.length &gt; 3 &amp;&amp; arguments[3] !== undefined ? arguments[3] : null;

      if (key &amp;&amp; callback) {
        this._callbackHelper.setUiCallback(message, key, callback);
      }
      this._callbackHelper.processMessage(message, key, param);
    }

    /**
    Requests the AQ App to show a text input UI for the user to input a title
     @param {function(value: string): void} callback - Callback function to be called when
      a title has been input by the user
    */

  }, {
    key: &apos;showTitleInput&apos;,
    value: function showTitleInput(callback) {
      this._saveCallbackAndProcessMessage(MESSAGE_SHOW_TITLE_INPUT, &apos;default&apos;, function (k, v) {
        callback(v);
      });
    }

    /**
    Requests the AQ App to show a selector UI from a list of image web urls
     @param {string} key - Unique key identifying this particular Requests
    @param {string} title - Title to be shown to the selector UI
    @param {string[]} imageUrls - An array of urls pointing to images that will be
      shown by the selector UI
    @param {function(key: string, value: string): void} callback - Callback function to be called when
      an image is selected from imageUrls
    */

  }, {
    key: &apos;showWebImageSelector&apos;,
    value: function showWebImageSelector(key, title, imageUrls, callback) {
      this._saveCallbackAndProcessMessage(MESSAGE_SHOW_WEB_IMAGE_SELECTOR, key, callback, {
        title: title,
        imageUrls: imageUrls
      });
    }

    /**
    Requests the AQ App to show a selector UI showing a list of available gallery images
     @param {string} key - Unique key identifying this particular Requests
    @param {string} title - Title to be shown to the selector UI
    @param {function(key: string, value: string): void} callback - Callback function to be called when
      an image is selected
    */

  }, {
    key: &apos;showGalleryImageSelector&apos;,
    value: function showGalleryImageSelector(key, title, callback) {
      this._saveCallbackAndProcessMessage(MESSAGE_SHOW_GALLERY_IMAGE_SELECTOR, key, callback, {
        title: title
      });
    }

    /**
    Requests the AQ App to show a selector UI showing a list of friends
     @param {string} key - Unique key identifying this particular Requests
    @param {function(key: string, value: string): void} callback - Callback function to be called when
      a list of friends has been selected
    */

  }, {
    key: &apos;showFriendsSelector&apos;,
    value: function showFriendsSelector(key, callback) {
      this._saveCallbackAndProcessMessage(MESSAGE_SHOW_FRIENDS_SELECTOR, key, callback);
    }

    /**
    Requests the AQ App to show the preivew screen given some data.
     This function will trigger the AQ App to show the preview dialogue of the mini-app,
    eventually passing the given parameters as data for the preview.
     If any of the parameters, except data, is null, the preview screen will not be shown.
     @param {string} title - Title obtained from user through showTitleInput()
    @param {string} coverImageUrl - Cover image obtained from user. This can be a data-uri image,
      or normal web url.
    @param {Object} data - Any mini-app specific data.
    */

  }, {
    key: &apos;showPreviewWithData&apos;,
    value: function showPreviewWithData(title, coverImageUrl, data) {
      this._saveCallbackAndProcessMessage(MESSAGE_SHOW_PREVIEW_WITH_DATA, null, null, {
        title: title,
        coverImageUrl: coverImageUrl,
        data: data
      });
    }
  }]);

  return UIBridge;
}();

var defaultUIBridge = new UIBridge(_CallbackHelper.defaultCallbackHelper);
exports.defaultUIBridge = defaultUIBridge;</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
