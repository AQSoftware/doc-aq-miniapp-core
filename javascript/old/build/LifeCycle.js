'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_base64Js=require('base64-js'),_base64Js2=_interopRequireDefault(_base64Js),_v=require('uuid/v1'),_v2=_interopRequireDefault(_v),_CallbackHelper=require('./CallbackHelper');Object.defineProperty(exports,'__esModule',{value:!0}),exports.defaultLifeCycle=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var MESSAGE_REQUEST_PREVIEW='requestPreview',MESSAGE_ON_DATA='onData',MESSAGE_SHOW_PREVIEW_WITH_DATA='showPreviewWithData',MESSAGE_JOIN='join',MESSAGE_PUBLISH='publish',MESSAGE_PUBLISH_STATUS='publishStatus',MESSAGE_END='end',LifeCycle=function(){function a(b){_classCallCheck(this,a),this._callbackHelper=b}return _createClass(a,[{key:'_saveCallbackAndProcessMessage',value:function _saveCallbackAndProcessMessage(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;b&&this._callbackHelper.setCoreCallback(a,b),this._callbackHelper.processMessage(a,null,c)}},{key:'setOnDataCallback',value:function setOnDataCallback(a){this._callbackHelper.setCoreCallback(MESSAGE_ON_DATA,a)}},{key:'setRequestPreviewCallback',value:function setRequestPreviewCallback(a){this._callbackHelper.setCoreCallback(MESSAGE_REQUEST_PREVIEW,a)}},{key:'setPublishCallback',value:function setPublishCallback(a){this._callbackHelper.setCoreCallback(MESSAGE_PUBLISH,a)}},{key:'showPreviewWithData',value:function showPreviewWithData(a,b,c){this._saveCallbackAndProcessMessage(MESSAGE_SHOW_PREVIEW_WITH_DATA,null,_extends({title:a,coverImageUrl:b},c))}},{key:'generateId',value:function generateId(){var a=Array(16);return(0,_v2.default)(null,a,0),_base64Js2.default.fromByteArray(a).replace(/\+/g,'-').replace(/\//g,'_').replace(/=/g,'')}},{key:'join',value:function join(a,b,c,d){this._saveCallbackAndProcessMessage(MESSAGE_JOIN,null,{id:a,joinImageUrl:b,winCriteriaPassed:c,notificationItem:d})}},{key:'end',value:function end(){this._saveCallbackAndProcessMessage(MESSAGE_END,null,null)}},{key:'publishSucceded',value:function publishSucceded(){this._saveCallbackAndProcessMessage(MESSAGE_PUBLISH_STATUS,null,{status:!0})}},{key:'publishFailed',value:function publishFailed(){this._saveCallbackAndProcessMessage(MESSAGE_PUBLISH_STATUS,null,{status:!1})}}]),a}(),defaultLifeCycle=new LifeCycle(_CallbackHelper.defaultCallbackHelper);exports.defaultLifeCycle=defaultLifeCycle;